{"ast":null,"code":"import React,{useState}from\"react\";import LoginForm from\"./LoginForm\";import ChatForm from\"./ChatForm\";import AdminPage from\"./AdminPage\";import{jsx as _jsx}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(()=>{const saved=localStorage.getItem(\"user\");return saved?JSON.parse(saved):null;});if(window.location.pathname===\"https://react-chat-app-1-bz2b.onrender.com/admin\"){const saved=localStorage.getItem(\"user\");const user=saved?JSON.parse(saved):null;if(!user||user.role!==\"admin\"){// ✅ Redirect về trang chủ nếu không phải admin\nwindow.location.href=\"/\";return null;}return/*#__PURE__*/_jsx(AdminPage,{});}return/*#__PURE__*/_jsx(\"div\",{children:user?/*#__PURE__*/_jsx(ChatForm,{user:user}):/*#__PURE__*/_jsx(LoginForm,{onLogin:setUser})});}export default App;","map":{"version":3,"names":["React","useState","LoginForm","ChatForm","AdminPage","jsx","_jsx","App","user","setUser","saved","localStorage","getItem","JSON","parse","window","location","pathname","role","href","children","onLogin"],"sources":["C:/chat-app/client/src/App.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport LoginForm from \"./LoginForm\";\nimport ChatForm from \"./ChatForm\";\nimport AdminPage from \"./AdminPage\";\n\nfunction App() {\n  const [user, setUser] = useState(() => {\n    const saved = localStorage.getItem(\"user\");\n    return saved ? JSON.parse(saved) : null;\n  });\n\n  if (window.location.pathname === \"https://react-chat-app-1-bz2b.onrender.com/admin\") {\n    const saved = localStorage.getItem(\"user\");\n    const user = saved ? JSON.parse(saved) : null;\n  \n    if (!user || user.role !== \"admin\") {\n      // ✅ Redirect về trang chủ nếu không phải admin\n      window.location.href = \"/\";\n      return null;\n    }\n  \n    return <AdminPage />;\n  }\n  return <div>{user ? <ChatForm user={user} /> : <LoginForm onLogin={setUser} />}</div>;\n}\n\nexport default App;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,SAAS,KAAM,aAAa,CACnC,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,MAAO,CAAAC,SAAS,KAAM,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEpC,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGR,QAAQ,CAAC,IAAM,CACrC,KAAM,CAAAS,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC1C,MAAO,CAAAF,KAAK,CAAGG,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAC,CAAG,IAAI,CACzC,CAAC,CAAC,CAEF,GAAIK,MAAM,CAACC,QAAQ,CAACC,QAAQ,GAAK,kDAAkD,CAAE,CACnF,KAAM,CAAAP,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC1C,KAAM,CAAAJ,IAAI,CAAGE,KAAK,CAAGG,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAC,CAAG,IAAI,CAE7C,GAAI,CAACF,IAAI,EAAIA,IAAI,CAACU,IAAI,GAAK,OAAO,CAAE,CAClC;AACAH,MAAM,CAACC,QAAQ,CAACG,IAAI,CAAG,GAAG,CAC1B,MAAO,KAAI,CACb,CAEA,mBAAOb,IAAA,CAACF,SAAS,GAAE,CAAC,CACtB,CACA,mBAAOE,IAAA,QAAAc,QAAA,CAAMZ,IAAI,cAAGF,IAAA,CAACH,QAAQ,EAACK,IAAI,CAAEA,IAAK,CAAE,CAAC,cAAGF,IAAA,CAACJ,SAAS,EAACmB,OAAO,CAAEZ,OAAQ,CAAE,CAAC,CAAM,CAAC,CACvF,CAEA,cAAe,CAAAF,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}